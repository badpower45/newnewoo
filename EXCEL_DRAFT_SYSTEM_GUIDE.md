# ูุธุงู ุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช ุงูุฌุฏูุฏ - ุฏููู ุงูุงุณุชุฎุฏุงู

## ุงูุชุญุฏูุซ ุงูุฌุฏูุฏ ๐

ุชู ุชุญุฏูุซ ูุธุงู ุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช ูู Excel ููููู ุฃูุซุฑ ูุฑููุฉ! ุงูุขู ููููู:
- โ ุฑูุน ุงูููุชุฌุงุช ุญุชู ูู ูุงูุช ุจูุงูุงุช ูุงูุตุฉ
- โ ูุฑุงุฌุนุฉ ุฌููุน ุงูููุชุฌุงุช ูุจู ุงููุดุฑ
- โ ุชุนุฏูู ุฃู ุจูุงูุงุช ูุงูุตุฉ ุฃู ุฎุงุทุฆุฉ
- โ ูุดุฑ ุงูููุชุฌุงุช ูุฑุฏูุงู ุฃู ุฏูุนุฉ ูุงุญุฏุฉ
- โ ุญุฐู ุงูููุชุฌุงุช ุบูุฑ ุงููุฑุบูุจุฉ

---

## ููู ูุนูู ุงููุธุงู ุงูุฌุฏูุฏุ

### 1. ุฑูุน ููู Excel
- ุงุฐูุจ ุฅูู **ุงุณุชูุฑุงุฏ Excel** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
- ุงุฎุชุฑ ููู Excel ุงูุฎุงุต ุจู
- ุงุถุบุท "ุฑูุน ูุฅุถุงูุฉ ุงูููุชุฌุงุช"

### 2. ุงูููุชุฌุงุช ุชูุญูุธ ููุณูุฏุงุช
- **ุฌููุน ุงูููุชุฌุงุช** ูุชู ุญูุธูุง ููุณูุฏุงุช (drafts)
- ุญุชู ูู ูุงูุช ุงูุจูุงูุงุช ูุงูุตุฉ (ุตูุฑุ ุฃุณุนุงุฑุ ุฅูุฎ)
- ูู ุชุธูุฑ ูู ุงููุชุฌุฑ ุญุชู ุชูุดุฑูุง

### 3. ุตูุญุฉ ุงููุฑุงุฌุนุฉ
ุจุนุฏ ุงูุฑูุนุ ุณุชูููู ุชููุงุฆูุงู ุฅูู ุตูุญุฉ ุงููุฑุงุฌุนุฉ ุญูุซ ููููู:

#### โ๏ธ ุชุนุฏูู ุฃู ููุชุฌ
- ุงุถุบุท "ุชุนุฏูู" ุนูู ุฃู ููุชุฌ
- ุฃููู ุงูุจูุงูุงุช ุงููุงูุตุฉ (ุงูุตูุฑุฉุ ุงูุณุนุฑุ ุงูุชุตูููุ ุฅูุฎ)
- ุงุถุบุท "ุญูุธ"

#### โ ูุดุฑ ุงูููุชุฌุงุช
- **ูุดุฑ ููุชุฌ ูุงุญุฏ**: ุงุถุบุท "ูุดุฑ" ุนูู ุงูููุชุฌ ุงููุทููุจ
- **ูุดุฑ ุนุฏุฉ ููุชุฌุงุช**: ุญุฏุฏ ุงูููุชุฌุงุช ุซู ุงุถุบุท "ูุดุฑ ุงููุญุฏุฏ"

#### ๐๏ธ ุญุฐู ุงูููุชุฌุงุช
- ุฅุฐุง ูุงู ููุงู ููุชุฌ ุบูุฑ ูุฑุบูุจุ ุงุถุบุท "ุญุฐู"

---

## ุงูุญููู ุงููุทููุจุฉ ูุงูุงุฎุชูุงุฑูุฉ

### ุงูุญููู ุงูุฃุณุงุณูุฉ (ููุถู ุชููุฑูุง)
1. **ุงุณู ุงูููุชุฌ** โญ ููู
2. **ุงูุณุนุฑ** โญ ููู ูููุดุฑ
3. **ุงูุชุตููู ุงูุฃุณุงุณู**
4. **ุงููุฑุน** (ุงูุชุฑุงุถูุงู 1 ุฅุฐุง ูู ููุญุฏุฏ)

### ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ
- ุงูุจุงุฑููุฏ
- ุงูุณุนุฑ ุงููุฏูู
- ุงูุชุตููู ุงูุซุงููู
- ุงููููุฉ (ุงูุชุฑุงุถูุงู 0)
- ุงูุตูุฑุฉ (ูููู ุฅุถุงูุชูุง ูุงุญูุงู)
- ุชุงุฑูุฎ ุงูุตูุงุญูุฉ

---

## ูุซุงู ุนููู

### ุงูุณููุงุฑูู
ูุฏูู ููู Excel ุจู 50 ููุชุฌ:
- 30 ููุชุฌ ูุงูู ุงูุจูุงูุงุช
- 15 ููุชุฌ ุจุฏูู ุตูุฑ
- 5 ููุชุฌุงุช ุจุฏูู ุฃุณุนุงุฑ

### ุงูุฎุทูุงุช
1. **ุงุฑูุน ุงูููู** - ุณูุชู ุญูุธ ุงูู 50 ููุชุฌ ููุณูุฏุงุช
2. **ุณุชุธูุฑ ุฑุณุงูุฉ**: "ุชู ุญูุธ 50 ููุชุฌ ููุณูุฏุงุช. ููููู ุงูุขู ูุฑุงุฌุนุชูุง ูุชุนุฏูููุง ูุจู ุงููุดุฑ."
3. **ูู ุตูุญุฉ ุงููุฑุงุฌุนุฉ**:
   - ุงูููุชุฌุงุช ุงูู 30 ุงููุงููุฉ: ุญุฏุฏูุง ูุงุถุบุท "ูุดุฑ ุงููุญุฏุฏ" โ
   - ุงูููุชุฌุงุช ุงูู 15 ุจุฏูู ุตูุฑ: ุนุฏูู ูู ูุงุญุฏ ูุฃุถู ุงูุตูุฑุฉ ุซู ุงูุดุฑู
   - ุงูููุชุฌุงุช ุงูู 5 ุจุฏูู ุฃุณุนุงุฑ: ุฃุถู ุงูุฃุณุนุงุฑ ุฃู ุงุญุฐููุง

---

## ุงูุฃุฎุทุงุก ูุงูุชุญุฐูุฑุงุช

### ุชุญุฐูุฑุงุช (Warnings) ๐ก
- **ูุง ุชููู ุงูุนูููุฉ**
- ูุซุงู: "Missing field: image"
- ูููู ุฅููุงููุง ูุงุญูุงู ูู ุตูุญุฉ ุงููุฑุงุฌุนุฉ

### ุฃุฎุทุงุก (Errors) ๐ด
- **ูุงุฏุฑุฉ ุฌุฏุงู**
- ููุท ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุชู ุนุฑุถูุง ูู ูุณู "ุฃุฎุทุงุก ุงูุงุณุชูุฑุงุฏ"

---

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏูู ุงูุฌุฏูุฏ: `draft_products`
ูุญุชูู ุนูู:
- ุฌููุน ุงูุจูุงูุงุช ุงููุฑููุนุฉ
- ุญุงูุฉ ุงูููุชุฌ (draft, validated)
- ุชูุงุตูู ุงูุฃุฎุทุงุก ูุงูุชุญุฐูุฑุงุช
- ูุนุฑูู ุงูุฏูุนุฉ (batch_id) ูุชุฌููุน ุงูููุชุฌุงุช ุงููุฑููุนุฉ ูุนุงู
- ูุนุฑูู ุงููุณุชุฎุฏู ุงูุฐู ุฑูุนูุง

### ุฏุงูุฉ ุงููุดุฑ: `publish_draft_product()`
- ุชููู ุงูููุชุฌ ูู `draft_products` ุฅูู `products`
- ุชุถูู ุงูุณุนุฑ ูุงููููุฉ ูู `branch_products`
- ุชุญุฐู ุงููุณูุฏุฉ ุจุนุฏ ุงููุดุฑ ุงููุงุฌุญ

---

## ุงูุฃูุงูุฑ ุงููุทููุจุฉ (ูููุทูุฑ)

### 1. ุชุดุบูู Migration
```sql
psql -U postgres -d your_database_name -f server/migrations/add_draft_products_table.sql
```

ุฃู ูู ุฏุงุฎู psql:
```sql
\i server/migrations/add_draft_products_table.sql
```

### 2. ุงูุชุฃูุฏ ูู ุชุซุจูุช uuid
```bash
cd server
npm install uuid
```

---

## ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุญููููุง

### โ "column "old_price" does not exist"
**ุงูุณุจุจ**: ูุงู ุงููุธุงู ุงููุฏูู ูุญุงูู ุฅุถุงูุฉ old_price ูู ุฌุฏูู products
**ุงูุญู**: ุงููุธุงู ุงูุฌุฏูุฏ ูุญูุธูุง ูู draft_products ุซู ูุชุฌุงูููุง ุนูุฏ ุงููุดุฑ

### โ "Missing required field: image"
**ุงูุณุจุจ**: ูุงู ุงููุธุงู ุงููุฏูู ูุฑูุถ ุงูููุชุฌุงุช ุจุฏูู ุตูุฑ
**ุงูุญู**: ุงููุธุงู ุงูุฌุฏูุฏ ููุจููุง ููุณูุฏุฉ ูููููู ุฅุถุงูุฉ ุงูุตูุฑุฉ ูุงุญูุงู

### โ "Draft product not found"
**ุงูุณุจุจ**: ุงูููุชุฌ ุชู ูุดุฑู ุฃู ุญุฐูู ุจุงููุนู
**ุงูุญู**: ูู ุจุชุญุฏูุซ ุงูุตูุญุฉ

---

## ูุตุงุฆุญ ููุงุณุชุฎุฏุงู ุงูุฃูุซู

1. **ุฑุชุจ ุงูุจูุงูุงุช ูุจู ุงูุฑูุน** - ูููุง ูุงูุช ุงูุจูุงูุงุช ุฃูููุ ูู ุงูููุช ูู ุงูุชุนุฏูู
2. **ุงุณุชุฎุฏู Batch ID** - ููููู ุงูุฑุฌูุน ููุฏูุนุฉ ุนุจุฑ ุงูุฑุงุจุท `/admin/drafts/{batchId}`
3. **ุฑุงุฌุน ูุจู ุงููุดุฑ** - ุชุฃูุฏ ูู ุงูุจูุงูุงุช ูุจู ุงููุดุฑ ุงูุฌูุงุนู
4. **ุงุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ** - ุงุญุชูุธ ุจููู Excel ุงูุฃุตูู

---

## API Endpoints ุงูุฌุฏูุฏุฉ

```javascript
// Get all drafts or by batch
GET /api/products/drafts?batchId=xxx

// Get single draft
GET /api/products/drafts/:id

// Update draft
PUT /api/products/drafts/:id

// Publish single draft
POST /api/products/drafts/:id/publish

// Publish multiple drafts
POST /api/products/drafts/batch/publish

// Delete draft
DELETE /api/products/drafts/:id
```

---

## ุงูุชุฏูู ุงููุงูู

```
1. Upload Excel File
   โ
2. Save all products as drafts (draft_products table)
   โ
3. Redirect to Review Page (/admin/drafts/:batchId)
   โ
4. User reviews, edits, and fixes missing data
   โ
5. User selects products to publish
   โ
6. publish_draft_product() function moves to products table
   โ
7. Draft is deleted after successful publish
   โ
8. Product appears in the store! โ
```

---

## ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุฌุฏูุฏ ูููุฑ ูู **ูุฑููุฉ ูุงููุฉ**:
- ูุง ุชููู ุจุดุฃู ุงูุจูุงูุงุช ุงููุงูุตุฉ ุนูุฏ ุงูุฑูุน
- ููููู ุงูุชุนุฏูู ูุงููุฑุงุฌุนุฉ ุจุฑุงุญุฉ
- ุชุญูู ูุงูู ูู ูุง ูููุดุฑ ููุง ูุง ูููุดุฑ
- ูุงุฌูุฉ ุณููุฉ ููุงุถุญุฉ

**ุชูุชุน ุจุฑูุน ุขูู ููุฑู ููููุชุฌุงุช! ๐**
