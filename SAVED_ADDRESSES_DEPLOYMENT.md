# ูุธุงู ุงูุนูุงููู ุงููุญููุธุฉ - ุฏููู ุงููุดุฑ

## โ ุงูุชุญุฏูุซุงุช ุงููุถุงูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฌุฏูู addresses ุฌุงูุฒ (17 ุญูู)
- โ ุญูู phone ู avatar ูููุณุชุฎุฏู
- โ ููุฏ unique ููุชุฃูุฏ ูู ุนููุงู ุงูุชุฑุงุถู ูุงุญุฏ ููุท

### 2. Backend APIs
- โ GET /api/addresses - ุฌูุจ ุฌููุน ุงูุนูุงููู
- โ POST /api/addresses - ุฅูุดุงุก ุนููุงู ุฌุฏูุฏ
- โ PUT /api/addresses/:id - ุชุญุฏูุซ ุนููุงู
- โ DELETE /api/addresses/:id - ุญุฐู ุนููุงู
- โ POST /api/addresses/:id/set-default - ุชุนููู ูุงูุชุฑุงุถู

### 3. Frontend Components
- โ SavedAddressSelector - ุงุฎุชูุงุฑ ุงูุนููุงู ูู ุงูุดุฑุงุก
- โ AddressesPage - ุฅุฏุงุฑุฉ ุงูุนูุงููู (ููุฌูุฏ ูุณุจูุงู)
- โ ProfilePage - ุฑุงุจุท ูุตูุญุฉ ุงูุนูุงููู

### 4. Integration
- โ CheckoutPage - ุนุฑุถ ุงูุนูุงููู ุงููุญููุธุฉ ูุจู ุงูุฅุฏุฎุงู ุงููุฏูู
- โ Auto-fill ุนูุฏ ุงุฎุชูุงุฑ ุนููุงู ูุญููุธ

---

## ๐ ุฎุทูุงุช ุงููุดุฑ

### ุฎุทูุฉ 1: ุชุดุบูู SQL Migration
```bash
# ุงูุณุฎ ูุญุชูู ุงูููู ุงูุชุงูู:
supabase/migrations/add_user_profile_fields.sql

# ุงูุชุญ Supabase Dashboard โ SQL Editor
# ุงูุตู ุงูููุฏ ูุดุบููู
```

### ุฎุทูุฉ 2: ุฑูุน ุงูุชุญุฏูุซุงุช ุนูู Vercel
```bash
# Commit ุงูุชุบููุฑุงุช
git add .
git commit -m "feat: Add saved addresses system for checkout"
git push origin main

# Vercel ุณูุนูู deploy ุชููุงุฆูุงู
```

### ุฎุทูุฉ 3: ุงูุชุญูู ูู ุงููุดุฑ
1. ุงูุชุญ ุงููููุน
2. ุณุฌู ุฏุฎูู ุฃู ุฃูุดุฆ ุญุณุงุจ
3. ุงุฐูุจ ุฅูู "ุงูููู ุงูุดุฎุตู" โ "ุนูุงูููู"
4. ุฃุถู ุนููุงู ุฌุฏูุฏ
5. ุงุฐูุจ ุฅูู "ุงูุดุฑุงุก"
6. ุชุฃูุฏ ูู ุธููุฑ ุงูุนูุงููู ุงููุญููุธุฉ

---

## ๐ฏ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุญูุธ ุงูุนูุงููู
- ุงููุณุชุฎุฏู ููููู ุญูุธ ุนูุงููู ูุชุนุฏุฏุฉ
- ุชุณููุฉ ูู ุนููุงู: ููุฒูุ ุนููุ ุขุฎุฑ
- ุชุนููู ุนููุงู ุงูุชุฑุงุถู

### 2. ุงุณุชุฎุฏุงู ุงูุนูุงููู ูู ุงูุดุฑุงุก
- ุนุฑุถ ุงูุนูุงููู ุงููุญููุธุฉ ูู ุตูุญุฉ Checkout
- ุงุฎุชูุงุฑ ุงูุนููุงู ูููุฃ ุงูุญููู ุชููุงุฆูุงู
- ุงูุนููุงู ุงูุงูุชุฑุงุถู ูุฎุชุงุฑ ุชููุงุฆูุงู

### 3. ุฅุฏุงุฑุฉ ุงูุนูุงููู
- ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ
- ุชุนุฏูู ุนููุงู ููุฌูุฏ
- ุญุฐู ุนููุงู
- ุชุนููู ุนููุงู ูุงูุชุฑุงุถู

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### Frontend
1. `components/SavedAddressSelector.tsx` - **ุฌุฏูุฏ**
   - ูููู ุงุฎุชูุงุฑ ุงูุนููุงู
   - ุนุฑุถ ุงูุนูุงููู ูุจุทุงูุงุช
   - Auto-select ููุนููุงู ุงูุงูุชุฑุงุถู

2. `pages/CheckoutPage.tsx`
   - ุฅุถุงูุฉ SavedAddressSelector ูุจู ุญููู ุงูุนููุงู
   - ุชุนุจุฆุฉ ุชููุงุฆูุฉ ุนูุฏ ุงุฎุชูุงุฑ ุนููุงู

3. `pages/ProfilePage.tsx`
   - ุฅุถุงูุฉ ุจุทุงูุฉ "ุนูุงูููู" ูู Quick Actions
   - ุฑุงุจุท ุฅูู `/addresses`

### Backend
4. `server/routes/addresses.js` - **ููุฌูุฏ ูุณุจูุงู**
   - CRUD APIs ููุนูุงููู
   - is_default management

### Database
5. `supabase/migrations/add_user_profile_fields.sql`
   - ุฌุฏูู addresses ูุงูู
   - ุญููู phone ู avatar

---

## ๐ ุฅุตูุงุญุงุช ุฅุถุงููุฉ

### Home Sections 500 Error
- **ุงูููู**: `server/routes/homeSections.js`
- **ุงูุฅุตูุงุญ**: 
  - Try-catch ุญูู ูู query ููููุชุฌุงุช
  - ุฅุฑุฌุงุน products: [] ุฅุฐุง ูุดู ุงููุณู
  - ููุฌ ููุตู ููุฃุฎุทุงุก
  - ุงูุงุณุชูุฑุงุฑ ูู ุงูุนูู ุญุชู ูู ูุดู ูุณู ูุงุญุฏ

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ุชุดุบูู SQL migration ูู Supabase
- [ ] ุฑูุน ุงูููุฏ ุนูู Git
- [ ] ุงูุชุธุงุฑ Deploy ูู Vercel
- [ ] ุชุฌุฑุจุฉ ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ
- [ ] ุชุฌุฑุจุฉ ุงูุดุฑุงุก ุจุงุณุชุฎุฏุงู ุนููุงู ูุญููุธ
- [ ] ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู Console

---

## ๐ ุงูุญููู ูู ุฌุฏูู addresses

| ุงูุญูู | ุงูููุน | ุงููุตู |
|------|------|-------|
| id | SERIAL | ูุนุฑู ูุฑูุฏ |
| user_id | INTEGER | ูุนุฑู ุงููุณุชุฎุฏู |
| label | VARCHAR(50) | ุงูุชุณููุฉ (ููุฒู/ุนูู/ุขุฎุฑ) |
| full_name | VARCHAR(100) | ุงูุงุณู ุงููุงูู |
| phone | VARCHAR(20) | ุฑูู ุงููุงุชู |
| governorate | VARCHAR(50) | ุงููุญุงูุธุฉ |
| city | VARCHAR(50) | ุงููุฏููุฉ |
| area | VARCHAR(100) | ุงูููุทูุฉ |
| street | VARCHAR(200) | ุงูุดุงุฑุน |
| building | VARCHAR(50) | ุฑูู ุงูุจูุงูุฉ |
| floor | VARCHAR(20) | ุงูุทุงุจู |
| apartment | VARCHAR(20) | ุฑูู ุงูุดูุฉ |
| landmark | TEXT | ูุนูู ูููุฒ |
| notes | TEXT | ููุงุญุธุงุช |
| is_default | BOOLEAN | ุงูุชุฑุงุถูุ |
| created_at | TIMESTAMP | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| updated_at | TIMESTAMP | ุชุงุฑูุฎ ุงูุชุญุฏูุซ |

---

## ๐จ UI Components

### SavedAddressSelector
- ุนุฑุถ ุงูุนูุงููู ูุจุทุงูุงุช ูุงุจูุฉ ููุถุบุท
- ุชูููุฒ ุงูุนููุงู ุงููุฎุชุงุฑ (border ุฃุฑุฌูุงูู)
- ุฅุธูุงุฑ badge "ุงูุชุฑุงุถู" ููุนููุงู ุงูุงูุชุฑุงุถู
- ุฃููููุฉ MapPin ููู ุนููุงู
- Loading spinner ุฃุซูุงุก ุงูุชุญููู
- Empty state ุฅุฐุง ูู ุชูุฌุฏ ุนูุงููู

### Checkout Integration
- ูุณู "ุงูุนูุงููู ุงููุญููุธุฉ" ุจุฎูููุฉ ุฃุฑุฌูุงูู ูุงุชุญ
- ุฑุงุจุท "ุฅุฏุงุฑุฉ ุงูุนูุงููู" ุฃุนูู ูุณุงุฑ
- ุงูุญููู ุงููุฏููุฉ ุชุญุช ุงูุนูุงููู ุงููุญููุธุฉ
- ูุธูุฑ ููุท ุฅุฐุง ูู ููู ุงูุทูุจ "ุงุณุชูุงู ูู ุงููุฑุน"

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

1. ุฅุถุงูุฉ validation ููุนูุงููู
2. ุฅุถุงูุฉ ุฎุฑูุทุฉ ูุชุญุฏูุฏ ุงููููุน
3. ุฅุถุงูุฉ history ููุนูุงููู ุงููุณุชุฎุฏูุฉ
4. ุฅุถุงูุฉ address suggestions ูู Google Maps

---

## ๐ ููุงุญุธุงุช

- ุงูุนููุงู ุงูุงูุชุฑุงุถู ููุฎุชุงุฑ ุชููุงุฆูุงู ูู Checkout
- ูุง ูููู ูุฌูุฏ ุฃูุซุฑ ูู ุนููุงู ุงูุชุฑุงุถู ูุงุญุฏ ููู ูุณุชุฎุฏู
- ุงูุนูุงููู ูุฑุชุจุทุฉ ุจุงููุณุชุฎุฏู (CASCADE DELETE)
- ุฌููุน APIs ูุญููุฉ ุจู authenticateToken
